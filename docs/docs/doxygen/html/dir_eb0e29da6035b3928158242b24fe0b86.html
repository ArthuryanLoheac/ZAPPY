<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: docs/node_modules/react-router-config Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dir_eb0e29da6035b3928158242b24fe0b86.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">react-router-config Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Static route configuration helpers for React Router.</p>
<p>This is alpha software, it needs:</p>
<ol type="1">
<li>Realistic server rendering example with data preloading</li>
<li>Pending navigation example</li>
</ol>
<h1><a class="anchor" id="autotoc_md18314"></a>
Installation</h1>
<p>Using <a href="https://www.npmjs.com/">npm</a>: </p><pre class="fragment">$ npm install --save react-router-config
</pre><p>Then with a module bundler like <a href="https://webpack.github.io/">webpack</a>, use as you would anything else:</p>
<div class="fragment"><div class="line">// using an ES6 transpiler, like babel</div>
<div class="line">import { matchRoutes, renderRoutes } from &quot;react-router-config&quot;;</div>
<div class="line"> </div>
<div class="line">// not using an ES6 transpiler</div>
<div class="line">var matchRoutes = require(&quot;react-router-config&quot;).matchRoutes;</div>
</div><!-- fragment --><p>The UMD build is also available on <a href="https://unpkg.com">unpkg</a>:</p>
<div class="fragment"><div class="line">&lt;script src=&quot;https://unpkg.com/react-router-config/umd/react-router-config.min.js&quot;&gt;&lt;/script&gt;</div>
</div><!-- fragment --><p>You can find the library on <code>window.ReactRouterConfig</code></p>
<h1><a class="anchor" id="autotoc_md18315"></a>
Motivation</h1>
<p>With the introduction of React Router v4, there is no longer a centralized route configuration. There are some use-cases where it is valuable to know about all the app's potential routes such as:</p>
<ul>
<li>Loading data on the server or in the lifecycle before rendering the next screen</li>
<li>Linking to routes by name</li>
<li>Static analysis</li>
</ul>
<p>This project seeks to define a shared format for others to build patterns on top of.</p>
<h1><a class="anchor" id="autotoc_md18316"></a>
Route Configuration Shape</h1>
<p>Routes are objects with the same properties as a <code>&lt;Route&gt;</code> with a couple differences:</p>
<ul>
<li>the only render prop it accepts is <code>component</code> (no <code>render</code> or <code>children</code>)</li>
<li>introduces the <code>routes</code> key for sub routes</li>
<li>Consumers are free to add any additional props they'd like to a route, you can access <code>props.route</code> inside the <code>component</code>, this object is a reference to the object used to render and match.</li>
<li>accepts <code>key</code> prop to prevent remounting component when transition was made from route with the same component and same <code>key</code> prop</li>
</ul>
<div class="fragment"><div class="line">const routes = [</div>
<div class="line">  {</div>
<div class="line">    component: Root,</div>
<div class="line">    routes: [</div>
<div class="line">      {</div>
<div class="line">        path: &quot;/&quot;,</div>
<div class="line">        exact: true,</div>
<div class="line">        component: Home</div>
<div class="line">      },</div>
<div class="line">      {</div>
<div class="line">        path: &quot;/child/:id&quot;,</div>
<div class="line">        component: Child,</div>
<div class="line">        routes: [</div>
<div class="line">          {</div>
<div class="line">            path: &quot;/child/:id/grand-child&quot;,</div>
<div class="line">            component: GrandChild</div>
<div class="line">          }</div>
<div class="line">        ]</div>
<div class="line">      }</div>
<div class="line">    ]</div>
<div class="line">  }</div>
<div class="line">];</div>
</div><!-- fragment --><p><b>Note</b>: Just like <code>&lt;Route&gt;</code>, relative paths are not (yet) supported. When it is supported there, it will be supported here.</p>
<h1><a class="anchor" id="autotoc_md18317"></a>
API</h1>
<h2><a class="anchor" id="autotoc_md18318"></a>
<code>matchRoutes(routes, pathname)</code></h2>
<p>Returns an array of matched routes.</p>
<h3><a class="anchor" id="autotoc_md18319"></a>
Parameters</h3>
<ul>
<li>routes - the route configuration</li>
<li>pathname - the <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLHyperlinkElementUtils/pathname">pathname</a> component of the url. This must be a decoded string representing the path.</li>
</ul>
<div class="fragment"><div class="line">import { matchRoutes } from &quot;react-router-config&quot;;</div>
<div class="line">const branch = matchRoutes(routes, &quot;/child/23&quot;);</div>
<div class="line">// using the routes shown earlier, this returns</div>
<div class="line">// [</div>
<div class="line">//   routes[0],</div>
<div class="line">//   routes[0].routes[1]</div>
<div class="line">// ]</div>
</div><!-- fragment --><p>Each item in the array contains two properties: <code>routes</code> and <code>match</code>.</p>
<ul>
<li><code>routes</code>: A reference to the routes array used to match</li>
<li><code>match</code>: The match object that also gets passed to <code>&lt;Route&gt;</code> render methods.</li>
</ul>
<div class="fragment"><div class="line">branch[0].match.url;</div>
<div class="line">branch[0].match.isExact;</div>
<div class="line">// etc.</div>
</div><!-- fragment --><p>You can use this branch of routes to figure out what is going to be rendered before it actually is rendered. You could do something like this on the server before rendering, or in a lifecycle hook of a component that wraps your entire app</p>
<div class="fragment"><div class="line">const loadBranchData = (location) =&gt; {</div>
<div class="line">  const branch = matchRoutes(routes, location.pathname)</div>
<div class="line"> </div>
<div class="line">  const promises = branch.map(({ route, match }) =&gt; {</div>
<div class="line">    return route.loadData</div>
<div class="line">      ? route.loadData(match)</div>
<div class="line">      : Promise.resolve(null)</div>
<div class="line">  })</div>
<div class="line"> </div>
<div class="line">  return Promise.all(promises)</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">// useful on the server for preloading data</div>
<div class="line">loadBranchData(req.url).then(data =&gt; {</div>
<div class="line">  putTheDataSomewhereTheClientCanFindIt(data)</div>
<div class="line">})</div>
<div class="line"> </div>
<div class="line">// also useful on the client for &quot;pending navigation&quot; where you</div>
<div class="line">// load up all the data before rendering the next page when</div>
<div class="line">// the url changes</div>
<div class="line"> </div>
<div class="line">// THIS IS JUST SOME THEORETICAL PSEUDO CODE :)</div>
<div class="line">class PendingNavDataLoader extends Component {</div>
<div class="line">  state = {</div>
<div class="line">    previousLocation: null,</div>
<div class="line">    currentLocation: this.props.location</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  static getDerivedStateFromProps(props, state) {</div>
<div class="line">    const currentLocation = props.location</div>
<div class="line">    const previousLocation = state.currentLocation</div>
<div class="line"> </div>
<div class="line">    const navigated = currentLocation !== previousLocation</div>
<div class="line">    if (navigated) {</div>
<div class="line">      // save the location so we can render the old screen</div>
<div class="line">      return {</div>
<div class="line">        previousLocation,</div>
<div class="line">        currentLocation</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    return null</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  componentDidUpdate(prevProps) {</div>
<div class="line">    const navigated = prevProps.location !== this.props.location</div>
<div class="line"> </div>
<div class="line">    if (navigated) {</div>
<div class="line">      // load data while the old screen remains</div>
<div class="line">      loadNextData(routes, this.props.location).then(data =&gt; {</div>
<div class="line">        putTheDataSomewhereRoutesCanFindIt(data)</div>
<div class="line">        // clear previousLocation so the next screen renders</div>
<div class="line">        this.setState({</div>
<div class="line">          previousLocation: null</div>
<div class="line">        })</div>
<div class="line">      })</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  render() {</div>
<div class="line">    const { children, location } = this.props</div>
<div class="line">    const { previousLocation } = this.state</div>
<div class="line"> </div>
<div class="line">    // use a controlled &lt;Route&gt; to trick all descendants into</div>
<div class="line">    // rendering the old location</div>
<div class="line">    return (</div>
<div class="line">      &lt;Route</div>
<div class="line">        location={previousLocation || location}</div>
<div class="line">        render={() =&gt; children}</div>
<div class="line">      /&gt;</div>
<div class="line">    )</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">// wrap in withRouter</div>
<div class="line">export default withRouter(PendingNavDataLoader)</div>
<div class="line"> </div>
<div class="line">/////////////</div>
<div class="line">// somewhere at the top of your app</div>
<div class="line">import routes from &#39;./routes&#39;</div>
<div class="line"> </div>
<div class="line">&lt;BrowserRouter&gt;</div>
<div class="line">  &lt;PendingNavDataLoader routes={routes}&gt;</div>
<div class="line">    {renderRoutes(routes)}</div>
<div class="line">  &lt;/PendingNavDataLoader&gt;</div>
<div class="line">&lt;/BrowserRouter&gt;</div>
</div><!-- fragment --><p>Again, that's all pseudo-code. There are a lot of ways to do server rendering with data and pending navigation and we haven't settled on one. The point here is that <code>matchRoutes</code> gives you a chance to match statically outside of the render lifecycle. We'd like to make a demo app of this approach eventually.</p>
<h2><a class="anchor" id="autotoc_md18320"></a>
<code>renderRoutes(routes, extraProps = {}, switchProps = {})</code></h2>
<p>In order to ensure that matching outside of render with <code>matchRoutes</code> and inside of render result in the same branch, you must use <code>renderRoutes</code> instead of <code>&lt;Route&gt;</code> inside your components. You can render a <code>&lt;Route&gt;</code> still, but know that it will not be accounted for in <code>matchRoutes</code> outside of render.</p>
<div class="fragment"><div class="line">import { renderRoutes } from &quot;react-router-config&quot;;</div>
<div class="line"> </div>
<div class="line">const routes = [</div>
<div class="line">  {</div>
<div class="line">    component: Root,</div>
<div class="line">    routes: [</div>
<div class="line">      {</div>
<div class="line">        path: &quot;/&quot;,</div>
<div class="line">        exact: true,</div>
<div class="line">        component: Home</div>
<div class="line">      },</div>
<div class="line">      {</div>
<div class="line">        path: &quot;/child/:id&quot;,</div>
<div class="line">        component: Child,</div>
<div class="line">        routes: [</div>
<div class="line">          {</div>
<div class="line">            path: &quot;/child/:id/grand-child&quot;,</div>
<div class="line">            component: GrandChild</div>
<div class="line">          }</div>
<div class="line">        ]</div>
<div class="line">      }</div>
<div class="line">    ]</div>
<div class="line">  }</div>
<div class="line">];</div>
<div class="line"> </div>
<div class="line">const Root = ({ route }) =&gt; (</div>
<div class="line">  &lt;div&gt;</div>
<div class="line">    &lt;h1&gt;Root&lt;/h1&gt;</div>
<div class="line">    {/* child routes won&#39;t render without this */}</div>
<div class="line">    {renderRoutes(route.routes)}</div>
<div class="line">  &lt;/div&gt;</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">const Home = ({ route }) =&gt; (</div>
<div class="line">  &lt;div&gt;</div>
<div class="line">    &lt;h2&gt;Home&lt;/h2&gt;</div>
<div class="line">  &lt;/div&gt;</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">const Child = ({ route }) =&gt; (</div>
<div class="line">  &lt;div&gt;</div>
<div class="line">    &lt;h2&gt;Child&lt;/h2&gt;</div>
<div class="line">    {/* child routes won&#39;t render without this */}</div>
<div class="line">    {renderRoutes(route.routes, { someProp: &quot;these extra props are optional&quot; })}</div>
<div class="line">  &lt;/div&gt;</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">const GrandChild = ({ someProp }) =&gt; (</div>
<div class="line">  &lt;div&gt;</div>
<div class="line">    &lt;h3&gt;Grand Child&lt;/h3&gt;</div>
<div class="line">    &lt;div&gt;{someProp}&lt;/div&gt;</div>
<div class="line">  &lt;/div&gt;</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">ReactDOM.render(</div>
<div class="line">  &lt;BrowserRouter&gt;</div>
<div class="line">    {/* kick it all off with the root route */}</div>
<div class="line">    {renderRoutes(routes)}</div>
<div class="line">  &lt;/BrowserRouter&gt;,</div>
<div class="line">  document.getElementById(&quot;root&quot;)</div>
<div class="line">);</div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_49e56c817e5e54854c35e136979f97ca.html">docs</a></li><li class="navelem"><a class="el" href="dir_a0409b32ef7fd26e7246cf83548265be.html">node_modules</a></li><li class="navelem"><a class="el" href="dir_eb0e29da6035b3928158242b24fe0b86.html">react-router-config</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
